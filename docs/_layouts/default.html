<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ page.title }} | {{ site.title }}</title>
    <meta
      name="description"
      content="{{ page.description | default: site.description }}"
    />
    <link
      rel="stylesheet"
      href="{{ '/assets/css/main.css' | relative_url }}?v=3"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar">
      <div class="navbar-container">
        <a href="{{ '/' | relative_url }}" class="navbar-brand">
          <img
            src="{{ '/assets/images/logo.png' | relative_url }}"
            alt="Yougopher"
            class="navbar-logo"
          />
          <span class="logo-text">Yougopher</span>
        </a>
        <button class="navbar-toggle" aria-label="Toggle navigation">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <ul class="navbar-links">
          <li class="navbar-search-mobile">
            <form action="{{ '/search' | relative_url }}" method="get">
              <input
                type="text"
                name="q"
                class="navbar-search-input"
                placeholder="Search docs..."
                aria-label="Search documentation"
              />
            </form>
          </li>
          <li><a href="{{ '/quickstart' | relative_url }}">Quick Start</a></li>
          <li>
            <a href="{{ '/api-reference' | relative_url }}">API Reference</a>
          </li>
          <li><a href="{{ '/cookbook' | relative_url }}">Cookbook</a></li>
          <li>
            <a href="{{ site.github_repo }}" target="_blank" rel="noopener"
              >GitHub</a
            >
          </li>
        </ul>
      </div>
    </nav>

    <div class="layout">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-content">
          <div class="sidebar-search">
            <form action="{{ '/search' | relative_url }}" method="get">
              <input
                type="text"
                name="q"
                class="sidebar-search-input"
                placeholder="Search docs..."
                aria-label="Search documentation"
              />
            </form>
          </div>
          <div class="sidebar-section">
            <h3>Getting Started</h3>
            <ul>
              <li>
                <a href="{{ '/quickstart' | relative_url }}">Quick Start</a>
              </li>
              <li>
                <a href="{{ '/api-reference' | relative_url }}"
                  >API Reference</a
                >
              </li>
              <li><a href="{{ '/cookbook' | relative_url }}">Cookbook</a></li>
            </ul>
          </div>

          <div class="sidebar-section">
            <h3>Core</h3>
            <ul>
              <li><a href="{{ '/core' | relative_url }}">Client & HTTP</a></li>
              <li><a href="{{ '/auth' | relative_url }}">Authentication</a></li>
            </ul>
          </div>

          <div class="sidebar-section">
            <h3>Data API</h3>
            <ul>
              <li><a href="{{ '/data' | relative_url }}">Data API</a></li>
              <li><a href="{{ '/analytics' | relative_url }}">Analytics</a></li>
            </ul>
          </div>

          <div class="sidebar-section">
            <h3>Live Streaming</h3>
            <ul>
              <li><a href="{{ '/streaming' | relative_url }}">Overview</a></li>
              <li>
                <a href="{{ '/live-streaming/' | relative_url }}"
                  >API Reference</a
                >
              </li>
              <li class="expandable">
                <a
                  href="{{ '/live-streaming/LiveBroadcasts/' | relative_url }}"
                  class="expandable-toggle"
                  >LiveBroadcasts</a
                >
                <ul class="sub-nav">
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveBroadcasts/list' | relative_url }}"
                      >list</a
                    >
                  </li>
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveBroadcasts/insert' | relative_url }}"
                      >insert</a
                    >
                  </li>
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveBroadcasts/update' | relative_url }}"
                      >update</a
                    >
                  </li>
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveBroadcasts/delete' | relative_url }}"
                      >delete</a
                    >
                  </li>
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveBroadcasts/bind' | relative_url }}"
                      >bind</a
                    >
                  </li>
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveBroadcasts/transition' | relative_url }}"
                      >transition</a
                    >
                  </li>
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveBroadcasts/cuepoint' | relative_url }}"
                      >cuepoint</a
                    >
                  </li>
                </ul>
              </li>
              <li class="expandable">
                <a
                  href="{{ '/live-streaming/LiveStreams/' | relative_url }}"
                  class="expandable-toggle"
                  >LiveStreams</a
                >
                <ul class="sub-nav">
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveStreams/list' | relative_url }}"
                      >list</a
                    >
                  </li>
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveStreams/insert' | relative_url }}"
                      >insert</a
                    >
                  </li>
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveStreams/update' | relative_url }}"
                      >update</a
                    >
                  </li>
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveStreams/delete' | relative_url }}"
                      >delete</a
                    >
                  </li>
                </ul>
              </li>
              <li class="expandable">
                <a
                  href="{{ '/live-streaming/LiveChatMessages/' | relative_url }}"
                  class="expandable-toggle"
                  >LiveChatMessages</a
                >
                <ul class="sub-nav">
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveChatMessages/list' | relative_url }}"
                      >list</a
                    >
                  </li>
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveChatMessages/insert' | relative_url }}"
                      >insert</a
                    >
                  </li>
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveChatMessages/delete' | relative_url }}"
                      >delete</a
                    >
                  </li>
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveChatMessages/transition' | relative_url }}"
                      >transition</a
                    >
                  </li>
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveChatMessages/stream-list' | relative_url }}"
                      >stream-list</a
                    >
                  </li>
                </ul>
              </li>
              <li class="expandable">
                <a
                  href="{{ '/live-streaming/LiveChatBans/' | relative_url }}"
                  class="expandable-toggle"
                  >LiveChatBans</a
                >
                <ul class="sub-nav">
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveChatBans/insert' | relative_url }}"
                      >insert</a
                    >
                  </li>
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveChatBans/delete' | relative_url }}"
                      >delete</a
                    >
                  </li>
                </ul>
              </li>
              <li class="expandable">
                <a
                  href="{{ '/live-streaming/LiveChatModerators/' | relative_url }}"
                  class="expandable-toggle"
                  >LiveChatModerators</a
                >
                <ul class="sub-nav">
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveChatModerators/list' | relative_url }}"
                      >list</a
                    >
                  </li>
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveChatModerators/insert' | relative_url }}"
                      >insert</a
                    >
                  </li>
                  <li>
                    <a
                      href="{{ '/live-streaming/LiveChatModerators/delete' | relative_url }}"
                      >delete</a
                    >
                  </li>
                </ul>
              </li>
              <li class="expandable">
                <a
                  href="{{ '/live-streaming/SuperChatEvents/' | relative_url }}"
                  class="expandable-toggle"
                  >SuperChatEvents</a
                >
                <ul class="sub-nav">
                  <li>
                    <a
                      href="{{ '/live-streaming/SuperChatEvents/list' | relative_url }}"
                      >list</a
                    >
                  </li>
                </ul>
              </li>
              <li class="expandable">
                <a
                  href="{{ '/live-streaming/examples/' | relative_url }}"
                  class="expandable-toggle"
                  >Examples</a
                >
                <ul class="sub-nav">
                  <li>
                    <a
                      href="{{ '/live-streaming/examples/chatbot' | relative_url }}"
                      >chatbot</a
                    >
                  </li>
                  <li>
                    <a
                      href="{{ '/live-streaming/examples/modbot' | relative_url }}"
                      >modbot</a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </div>

          <div class="sidebar-section">
            <h3>Help</h3>
            <ul>
              <li><a href="{{ '/faq' | relative_url }}">FAQ</a></li>
              <li>
                <a href="{{ '/troubleshooting' | relative_url }}"
                  >Troubleshooting</a
                >
              </li>
            </ul>
          </div>

          <div class="sidebar-section">
            <h3>Project</h3>
            <ul>
              <li><a href="{{ '/test-results' | relative_url }}">Test Results</a></li>
              <li><a href="{{ '/changelog' | relative_url }}">Changelog</a></li>
              <li><a href="{{ '/planning' | relative_url }}">Planning</a></li>
              <li><a href="{{ '/todo' | relative_url }}">TODO</a></li>
              <li><a href="{{ '/youtube-api' | relative_url }}">API Coverage</a></li>
              <li><a href="{{ site.github_repo }}/blob/main/LICENSE">License</a></li>
            </ul>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <article class="content">
          <header class="page-header">
            <h1>{{ page.title }}</h1>
            {% if page.description %}
            <p class="page-description">{{ page.description }}</p>
            {% endif %}
          </header>

          {{ content }}
        </article>
      </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-container">
        <div class="footer-section">
          <h4>Yougopher</h4>
          <p>
            A YouTube API toolkit in Go focused on live chat bot functionality.
          </p>
        </div>
        <div class="footer-section">
          <h4>Links</h4>
          <ul>
            <li><a href="{{ site.github_repo }}">GitHub</a></li>
            <li>
              <a href="https://pkg.go.dev/github.com/Its-donkey/yougopher"
                >Go Docs</a
              >
            </li>
            <li>
              <a href="https://developers.google.com/youtube/v3">YouTube API</a>
            </li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Resources</h4>
          <ul>
            <li>
              <a href="{{ '/quickstart' | relative_url }}">Quick Start</a>
            </li>
            <li><a href="{{ '/cookbook' | relative_url }}">Cookbook</a></li>
            <li><a href="{{ '/faq' | relative_url }}">FAQ</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>
          &copy; {{ 'now' | date: '%Y' }} Yougopher. Released under the MIT
          License.
        </p>
        <p class="footer-disclaimer">
          YouTube is a trademark of Google LLC. Yougopher is not affiliated with
          or endorsed by Google.
        </p>
      </div>
    </footer>

    <script>
      // Mobile navigation toggle
      document
        .querySelector(".navbar-toggle")
        .addEventListener("click", function () {
          document.querySelector(".navbar-links").classList.toggle("active");
          this.classList.toggle("active");
        });

      // Active link highlighting and expandable navigation
      const currentPath = window.location.pathname;
      document.querySelectorAll(".sidebar a").forEach((link) => {
        const href = link.getAttribute("href");
        // Only highlight exact matches
        if (href === currentPath) {
          link.classList.add("active");
        }
        // Auto-expand parent if current path is within this section
        if (
          href === currentPath ||
          currentPath.startsWith(href.replace(/\/$/, "") + "/")
        ) {
          const parentExpandable = link.closest(".expandable");
          if (parentExpandable) {
            parentExpandable.classList.add("expanded");
          }
        }
      });

      // Toggle expandable items on click
      document.querySelectorAll(".expandable-toggle").forEach((toggle) => {
        toggle.addEventListener("click", function (e) {
          const parent = this.closest(".expandable");
          // If clicking the toggle arrow area or already on this page, toggle expansion
          if (
            parent.classList.contains("expanded") &&
            this.classList.contains("active")
          ) {
            e.preventDefault();
            parent.classList.remove("expanded");
          } else if (!this.classList.contains("active")) {
            // Navigate but also expand
            parent.classList.add("expanded");
          }
        });
      });

      // Keyboard shortcut: Press '/' to focus search
      document.addEventListener("keydown", function (e) {
        if (
          e.key === "/" &&
          !["INPUT", "TEXTAREA"].includes(document.activeElement.tagName)
        ) {
          e.preventDefault();
          const searchInput = document.querySelector(".sidebar-search-input");
          if (searchInput) searchInput.focus();
        }
      });
    </script>
  </body>
</html>
